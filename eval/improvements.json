{
  "version": "1.0",
  "description": "Phase 1 improvement backlog — ordered by expected impact",
  "improvements": [
    {
      "id": "orch-continue-on-fail",
      "pipeline": "orchestrator",
      "priority": "P0",
      "category": "error-handling",
      "title": "Add continueOnFail to all orchestrator sub-workflow calls",
      "description": "Sub-workflow timeouts crash entire orchestrator. continueOnFail prevents cascade.",
      "expected_impact_pp": 15,
      "apply_fn": "improve_orchestrator",
      "patch_keys": ["continueOnFail"],
      "status": "pending",
      "applied_at": null,
      "verified_at": null,
      "actual_impact_pp": null
    },
    {
      "id": "orch-response-builder-null",
      "pipeline": "orchestrator",
      "priority": "P0",
      "category": "bug-fix",
      "title": "Null-safe Response Builder V9 (handle empty task_results)",
      "description": "Response Builder crashes on empty task_results from timed-out sub-workflows.",
      "expected_impact_pp": 10,
      "apply_fn": "improve_orchestrator",
      "patch_keys": ["response_builder_null_safe"],
      "status": "pending",
      "applied_at": null,
      "verified_at": null,
      "actual_impact_pp": null
    },
    {
      "id": "orch-router-space-fix",
      "pipeline": "orchestrator",
      "priority": "P0",
      "category": "bug-fix",
      "title": "Fix Query Router leading space in ' direct_llm' routing",
      "description": "Leading space causes misrouting. Trim + normalize routing output.",
      "expected_impact_pp": 3,
      "apply_fn": "improve_orchestrator",
      "patch_keys": ["router_space_fix"],
      "status": "pending",
      "applied_at": null,
      "verified_at": null,
      "actual_impact_pp": null
    },
    {
      "id": "orch-intent-single-pipeline",
      "pipeline": "orchestrator",
      "priority": "P0",
      "category": "optimization",
      "title": "Intent Analyzer: prefer single-pipeline routing over broadcast",
      "description": "Routing to 1 pipeline instead of 3 reduces timeout probability by ~67%.",
      "expected_impact_pp": 8,
      "apply_fn": "improve_orchestrator",
      "patch_keys": ["intent_single_pipeline"],
      "status": "pending",
      "applied_at": null,
      "verified_at": null,
      "actual_impact_pp": null
    },
    {
      "id": "graph-fuzzy-matching",
      "pipeline": "graph",
      "priority": "P0",
      "category": "retrieval",
      "title": "Fuzzy entity matching in Neo4j (CONTAINS + Levenshtein)",
      "description": "Entity names don't always match exactly. Fuzzy matching catches variations.",
      "expected_impact_pp": 12,
      "apply_fn": "improve_graph_rag",
      "patch_keys": ["fuzzy_matching"],
      "status": "pending",
      "applied_at": null,
      "verified_at": null,
      "actual_impact_pp": null
    },
    {
      "id": "graph-entity-extraction",
      "pipeline": "graph",
      "priority": "P0",
      "category": "retrieval",
      "title": "Improved entity extraction rules in HyDE prompt",
      "description": "Entity catalog + extraction rules improve entity recognition.",
      "expected_impact_pp": 8,
      "apply_fn": "improve_graph_rag",
      "patch_keys": ["entity_extraction"],
      "status": "pending",
      "applied_at": null,
      "verified_at": null,
      "actual_impact_pp": null
    },
    {
      "id": "graph-never-insufficient",
      "pipeline": "graph",
      "priority": "P0",
      "category": "prompt",
      "title": "Never say 'insufficient context' — always attempt an answer",
      "description": "Graph RAG returns 'insufficient context' when it should attempt answer from partial data.",
      "expected_impact_pp": 5,
      "apply_fn": "improve_graph_rag",
      "patch_keys": ["never_insufficient"],
      "status": "pending",
      "applied_at": null,
      "verified_at": null,
      "actual_impact_pp": null
    },
    {
      "id": "standard-answer-compression",
      "pipeline": "standard",
      "priority": "P0",
      "category": "prompt",
      "title": "Answer compression prompt for concise factual answers",
      "description": "Verbose answers have low F1. Compression prompt yields shorter, more accurate answers.",
      "expected_impact_pp": 5,
      "apply_fn": "improve_standard_rag",
      "patch_keys": ["answer_compression"],
      "status": "pending",
      "applied_at": null,
      "verified_at": null,
      "actual_impact_pp": null
    },
    {
      "id": "standard-topk-increase",
      "pipeline": "standard",
      "priority": "P1",
      "category": "retrieval",
      "title": "Increase topK from 8 to 12 for better recall",
      "description": "More retrieved documents improve coverage for edge questions.",
      "expected_impact_pp": 2,
      "apply_fn": "improve_standard_rag",
      "patch_keys": ["topk_increase"],
      "status": "pending",
      "applied_at": null,
      "verified_at": null,
      "actual_impact_pp": null
    },
    {
      "id": "quant-sql-hints",
      "pipeline": "quantitative",
      "priority": "P0",
      "category": "prompt",
      "title": "SQL generation hints: ILIKE, FY vs Q1-Q4, schema awareness",
      "description": "SQL generation fails on case-sensitive queries and period logic.",
      "expected_impact_pp": 4,
      "apply_fn": "improve_quantitative_rag",
      "patch_keys": ["sql_hints"],
      "status": "pending",
      "applied_at": null,
      "verified_at": null,
      "actual_impact_pp": null
    },
    {
      "id": "quant-zero-row-detection",
      "pipeline": "quantitative",
      "priority": "P1",
      "category": "error-handling",
      "title": "Zero-row detection and fallback in SQL results",
      "description": "SQL returns 0 rows for some queries. Detect and try alternative SQL.",
      "expected_impact_pp": 3,
      "apply_fn": "improve_quantitative_rag",
      "patch_keys": ["zero_row_detection"],
      "status": "pending",
      "applied_at": null,
      "verified_at": null,
      "actual_impact_pp": null
    },
    {
      "id": "eval-scoring-improvements",
      "pipeline": "all",
      "priority": "P0",
      "category": "eval",
      "title": "Improved answer evaluation: exact_match, normalize_text, lower F1 threshold",
      "description": "Better scoring catches correct answers that were marked wrong due to formatting.",
      "expected_impact_pp": 3,
      "apply_fn": null,
      "patch_keys": [],
      "status": "applied",
      "applied_at": "2026-02-08T00:00:00Z",
      "verified_at": null,
      "actual_impact_pp": null,
      "note": "Already in run-eval.py code"
    }
  ]
}
