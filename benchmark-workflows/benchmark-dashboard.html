<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RAG Benchmark Dashboard</title>
<style>
:root {
    --bg: #0d1117; --surface: #161b22; --border: #30363d;
    --text: #e6edf3; --text2: #8b949e; --accent: #58a6ff;
    --green: #3fb950; --red: #f85149; --yellow: #d29922; --orange: #db6d28;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { background:var(--bg); color:var(--text); font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif; padding:20px; }
h1 { font-size:1.8em; margin-bottom:4px; }
h2 { font-size:1.3em; margin:24px 0 12px; color:var(--accent); border-bottom:1px solid var(--border); padding-bottom:6px; }
h3 { font-size:1.1em; margin:16px 0 8px; color:var(--text2); }
.subtitle { color:var(--text2); font-size:0.9em; margin-bottom:20px; }
.grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:12px; margin:16px 0; }
.card { background:var(--surface); border:1px solid var(--border); border-radius:8px; padding:16px; }
.card .label { color:var(--text2); font-size:0.8em; text-transform:uppercase; letter-spacing:0.5px; }
.card .value { font-size:2em; font-weight:700; margin:4px 0; }
.card .sub { color:var(--text2); font-size:0.85em; }
.green { color:var(--green); }
.red { color:var(--red); }
.yellow { color:var(--yellow); }
.orange { color:var(--orange); }
.accent { color:var(--accent); }
table { width:100%; border-collapse:collapse; margin:12px 0; font-size:0.9em; }
th { background:var(--surface); color:var(--text2); text-align:left; padding:8px 12px; border-bottom:2px solid var(--border); font-weight:600; }
td { padding:8px 12px; border-bottom:1px solid var(--border); }
tr:hover { background:rgba(88,166,255,0.05); }
.bar { height:20px; border-radius:4px; display:flex; overflow:hidden; background:var(--border); }
.bar-fill { height:100%; transition:width 0.3s; }
.tag { display:inline-block; padding:2px 8px; border-radius:12px; font-size:0.75em; font-weight:600; }
.tag-ok { background:rgba(63,185,80,0.15); color:var(--green); }
.tag-warn { background:rgba(210,153,34,0.15); color:var(--yellow); }
.tag-err { background:rgba(248,81,73,0.15); color:var(--red); }
.tag-info { background:rgba(88,166,255,0.15); color:var(--accent); }
.alert { background:rgba(248,81,73,0.1); border:1px solid rgba(248,81,73,0.3); border-radius:8px; padding:16px; margin:16px 0; }
.alert-warn { background:rgba(210,153,34,0.1); border-color:rgba(210,153,34,0.3); }
.alert h3 { color:var(--red); margin:0 0 8px; }
.alert-warn h3 { color:var(--yellow); }
.section { margin:24px 0; }
.flex { display:flex; gap:16px; flex-wrap:wrap; }
.flex > * { flex:1; min-width:300px; }
.filter-bar { background:var(--surface); border:1px solid var(--border); border-radius:8px; padding:12px; margin:12px 0; display:flex; gap:8px; flex-wrap:wrap; }
.filter-bar select, .filter-bar input { background:var(--bg); color:var(--text); border:1px solid var(--border); border-radius:4px; padding:6px 10px; }
.mono { font-family:'SF Mono',Monaco,Consolas,monospace; font-size:0.85em; }
#question-table { max-height:500px; overflow-y:auto; }
</style>
</head>
<body>

<h1>RAG Benchmark Dashboard</h1>
<p class="subtitle">Generated 2026-02-07 12:46 | Multi-RAG Orchestrator — SOTA 2026</p>

<!-- CRITICAL ALERTS -->
<div class="alert">
<h3>ALERTE CRITIQUE : 800/1200 questions ne sont pas testables</h3>
<p>Le fichier <code>rag-1000-test-questions.json</code> contient 1000 questions issues de HuggingFace (musique, 2wikimultihopqa, finqa, tatqa, convfinqa, wikitablequestions) mais <strong>800 d'entre elles n'ont aucune donnee correspondante dans les BDD</strong>.</p>
<ul style="margin:8px 0 0 20px;color:var(--text2)">
<li><strong>Graph RAG</strong> : 500q multi-hop (musique/2wiki) → Neo4j n'a que 145 noeuds curates, pas les entites HuggingFace</li>
<li><strong>Quantitative</strong> : 300q (tatqa/convfinqa/wikitablequestions) → Supabase n'a que 88 rows pour 3 entreprises fictives</li>
<li><strong>Seules 200q finqa</strong> ont un namespace Pinecone, mais le pipeline Quantitative utilise SQL, pas Pinecone</li>
</ul>
</div>

<div class="alert alert-warn">
<h3>9 questions dupliquees detectees</h3>
<p>Les datasets 50x2 et std-orch partagent 9 questions identiques (ex: "Who discovered penicillin?", "What is machine learning?"). Les scripts actuels les testent 2 fois.</p>
</div>

<!-- KPI CARDS -->
<h2>Vue d'ensemble</h2>
<div class="grid">
<div class="card">
  <div class="label">Questions Totales</div>
  <div class="value">1,200</div>
  <div class="sub">1,191 uniques (9 doublons)</div>
</div>
<div class="card">
  <div class="label">Deja Testees</div>
  <div class="value green">0</div>
  <div class="sub">via run-comprehensive-eval.py</div>
</div>
<div class="card">
  <div class="label">Testables (data en BDD)</div>
  <div class="value yellow">200</div>
  <div class="sub">200 restantes testables</div>
</div>
<div class="card">
  <div class="label">NON Testables (pas de data)</div>
  <div class="value red">1000</div>
  <div class="sub">Necessite ingestion HuggingFace</div>
</div>
</div>

<!-- PER-TYPE TABLE -->
<h2>Resultats par pipeline RAG</h2>
<table>
<tr>
  <th>Pipeline</th><th>Total Q</th><th>Testees</th><th>Correctes</th>
  <th>Accuracy</th><th>IC 95%</th><th>Erreurs</th>
  <th>Latence Avg</th><th>P95</th><th>Restantes</th><th>Sans data BDD</th>
</tr>
<tr>
  <td><strong>STANDARD</strong></td>
  <td>50</td>
  <td>0</td>
  <td>0</td>
  <td class="red"><strong>—</strong></td>
  <td class="mono">—</td>
  <td class="">0</td>
  <td>—</td>
  <td>—</td>
  <td class="yellow">50</td>
  <td class="green">0</td>
</tr>
<tr>
  <td><strong>GRAPH</strong></td>
  <td>550</td>
  <td>0</td>
  <td>0</td>
  <td class="red"><strong>—</strong></td>
  <td class="mono">—</td>
  <td class="">0</td>
  <td>—</td>
  <td>—</td>
  <td class="yellow">550</td>
  <td class="red">500</td>
</tr>
<tr>
  <td><strong>QUANTITATIVE</strong></td>
  <td>550</td>
  <td>0</td>
  <td>0</td>
  <td class="red"><strong>—</strong></td>
  <td class="mono">—</td>
  <td class="">0</td>
  <td>—</td>
  <td>—</td>
  <td class="yellow">550</td>
  <td class="red">500</td>
</tr>
<tr>
  <td><strong>ORCHESTRATOR</strong></td>
  <td>50</td>
  <td>0</td>
  <td>0</td>
  <td class="red"><strong>—</strong></td>
  <td class="mono">—</td>
  <td class="">0</td>
  <td>—</td>
  <td>—</td>
  <td class="yellow">50</td>
  <td class="green">0</td>
</tr>
</table>

<!-- DATASET COVERAGE -->
<h2>Couverture BDD par dataset</h2>
<div class="flex">
<div>
<h3>Pinecone (Vectors)</h3>
<table>
<tr><th>Namespace</th><th>Vectors</th><th>Status</th></tr><tr><td class='mono'>(default)</td><td>639</td><td><span class="tag tag-ok">OK</span></td></tr><tr><td class='mono'>asqa</td><td>948</td><td><span class="tag tag-ok">OK</span></td></tr><tr><td class='mono'>finqa</td><td>500</td><td><span class="tag tag-ok">OK</span></td></tr><tr><td class='mono'>frames</td><td>824</td><td><span class="tag tag-ok">OK</span></td></tr><tr><td class='mono'>hotpotqa</td><td>1,000</td><td><span class="tag tag-ok">OK</span></td></tr><tr><td class='mono'>msmarco</td><td>1,000</td><td><span class="tag tag-ok">OK</span></td></tr><tr><td class='mono'>narrativeqa</td><td>1,000</td><td><span class="tag tag-ok">OK</span></td></tr><tr><td class='mono'>natural_questions</td><td>1,000</td><td><span class="tag tag-ok">OK</span></td></tr><tr><td class='mono'>popqa</td><td>1,000</td><td><span class="tag tag-ok">OK</span></td></tr><tr><td class='mono'>pubmedqa</td><td>500</td><td><span class="tag tag-ok">OK</span></td></tr><tr><td class='mono'>squad_v2</td><td>1,000</td><td><span class="tag tag-ok">OK</span></td></tr><tr><td class='mono'>triviaqa</td><td>1,000</td><td><span class="tag tag-ok">OK</span></td></tr>
<tr style="font-weight:700"><td>TOTAL</td><td>10,411</td><td></td></tr>
</table>
</div>
<div>
<h3>Neo4j (Graph)</h3>
<table>
<tr><th>Label</th><th>Nodes</th></tr><tr><td>Person</td><td>41</td></tr><tr><td>Organization</td><td>21</td></tr><tr><td>Technology</td><td>19</td></tr><tr><td>City</td><td>16</td></tr><tr><td>Concept</td><td>12</td></tr><tr><td>Disease</td><td>6</td></tr><tr><td>Museum</td><td>6</td></tr>
<tr style="font-weight:700"><td>TOTAL</td><td>145</td></tr>
<tr><td>Relations</td><td>98</td></tr>
</table>
<p style="color:var(--text2);font-size:0.85em;margin-top:8px">
  Graphe curate seulement. Aucune donnee HuggingFace (musique, 2wiki) ingéree.
  Les 500 questions graph du dataset 1000q ne sont PAS testables.
</p>
</div>
<div>
<h3>Supabase (SQL)</h3>
<table>
<tr><th>Table</th><th>Rows</th></tr>
<tr><td>financials</td><td>24</td></tr>
<tr><td>balance_sheet</td><td>12</td></tr>
<tr><td>sales_data</td><td>16</td></tr>
<tr><td>products</td><td>18</td></tr>
<tr><td>employees</td><td>9</td></tr>
<tr><td>community_summaries</td><td>9</td></tr>
<tr style="font-weight:700"><td>TOTAL</td><td>88</td></tr>
</table>
<p style="color:var(--text2);font-size:0.85em;margin-top:8px">
  3 entreprises fictives: TechVision, GreenEnergy, HealthPlus.<br>
  Aucune donnee finqa/tatqa/convfinqa/wikitablequestions.
</p>
</div>
</div>

<!-- DATASET x PIPELINE MATRIX -->
<h2>Matrice Dataset ↔ Pipeline ↔ BDD</h2>
<table>
<tr><th>Dataset</th><th>Pipeline cible</th><th>Questions</th><th>BDD utilisee</th><th>Data presente?</th><th>Testable?</th></tr><tr><td>custom-200q (50x2+std-orch)</td><td>standard</td><td>50</td><td>Pinecone</td><td><span class="tag tag-ok">OUI</span></td><td><span class="tag tag-ok">OUI</span></td></tr><tr><td>custom-200q (50x2+std-orch)</td><td>graph</td><td>50</td><td>Neo4j</td><td><span class="tag tag-ok">OUI</span></td><td><span class="tag tag-ok">OUI</span></td></tr><tr><td>custom-200q (50x2+std-orch)</td><td>quantitative</td><td>50</td><td>Supabase SQL</td><td><span class="tag tag-ok">OUI</span></td><td><span class="tag tag-ok">OUI</span></td></tr><tr><td>custom-200q (50x2+std-orch)</td><td>orchestrator</td><td>50</td><td>Multi-RAG</td><td><span class="tag tag-ok">OUI</span></td><td><span class="tag tag-ok">OUI</span></td></tr><tr><td>musique (HuggingFace)</td><td>graph</td><td>200</td><td>Neo4j</td><td><span class="tag tag-err">NON</span></td><td><span class="tag tag-err">NON</span></td></tr><tr><td>2wikimultihopqa (HuggingFace)</td><td>graph</td><td>300</td><td>Neo4j</td><td><span class="tag tag-err">NON</span></td><td><span class="tag tag-err">NON</span></td></tr><tr><td>finqa (HuggingFace)</td><td>quantitative</td><td>200</td><td>Supabase SQL</td><td><span class="tag tag-err">NON</span></td><td><span class="tag tag-err">NON</span></td></tr><tr><td>tatqa (HuggingFace)</td><td>quantitative</td><td>150</td><td>Supabase SQL</td><td><span class="tag tag-err">NON</span></td><td><span class="tag tag-err">NON</span></td></tr><tr><td>convfinqa (HuggingFace)</td><td>quantitative</td><td>100</td><td>Supabase SQL</td><td><span class="tag tag-err">NON</span></td><td><span class="tag tag-err">NON</span></td></tr><tr><td>wikitablequestions (HuggingFace)</td><td>quantitative</td><td>50</td><td>Supabase SQL</td><td><span class="tag tag-err">NON</span></td><td><span class="tag tag-err">NON</span></td></tr>
</table>

<!-- STATISTICAL ANALYSIS -->
<h2>Analyse statistique : le sample est-il suffisant ?</h2>
<div class="card" style="max-width:800px">
<table>
<tr><th>Pipeline</th><th>n (tested)</th><th>Accuracy</th><th>IC 95%</th><th>Marge d'erreur</th><th>Suffisant?</th></tr>
</table>
<p style="color:var(--text2);font-size:0.85em;margin-top:12px">
<strong>Regle empirique :</strong> Pour detecter une amelioration de 5 points (ex: 78% → 83%),
il faut <strong>~250 questions par pipeline</strong> (puissance 80%, alpha 5%).<br>
Avec 50 questions par type, la marge d'erreur est de ±12-14%, ce qui masque les ameliorations de &lt;10 points.<br>
<strong>Recommandation minimum :</strong> 200-300 questions par pipeline = 800-1200 questions testables au total.
</p>
</div>

<!-- PERTINENCE ANALYSIS -->
<h2>Pertinence des datasets actuels</h2>
<div class="flex">
<div class="card">
<h3 style="color:var(--green)">Bien aligne</h3>
<ul style="margin:8px 0 0 16px;color:var(--text2)">
<li><strong>custom-200q</strong> : Crafté pour les 3 BDD existantes. Precision fiable.</li>
<li><strong>Quantitative custom</strong> : Questions alignées sur TechVision/GreenEnergy/HealthPlus → 80% accuracy</li>
<li><strong>Standard custom</strong> : Questions factuelles générales → 78% accuracy (Pinecone vectors OK)</li>
</ul>
</div>
<div class="card">
<h3 style="color:var(--red)">Non pertinent (actuellement)</h3>
<ul style="margin:8px 0 0 16px;color:var(--text2)">
<li><strong>musique/2wiki (500q graph)</strong> : Questions multi-hop complexes → Neo4j n'a PAS les entités correspondantes</li>
<li><strong>tatqa/convfinqa/wikitable (300q quant)</strong> : Données financières réelles → Supabase n'a PAS ces tables</li>
<li><strong>finqa (200q quant)</strong> : Dans Pinecone mais WF4 utilise SQL, pas vector search</li>
</ul>
</div>
<div class="card">
<h3 style="color:var(--yellow)">Pour la prochaine session</h3>
<ul style="margin:8px 0 0 16px;color:var(--text2)">
<li>Ingérer musique + 2wiki dans Neo4j (entités + relations extraites par LLM)</li>
<li>Ingérer tatqa/convfinqa tables dans Supabase (CREATE TABLE + INSERT)</li>
<li>Generer 200+ questions custom supplementaires pour chaque pipeline</li>
<li>Objectif: 300q testables par pipeline = 1200q total avec data en BDD</li>
</ul>
</div>
</div>

<!-- ROADMAP TO 10M+ -->
<h2>Roadmap vers 10M+ questions</h2>
<table>
<tr><th>Phase</th><th>Action</th><th>Questions</th><th>Prerequis</th></tr>
<tr><td><span class="tag tag-ok">FAIT</span></td><td>Custom 200q (session Feb 7)</td><td>200</td><td>—</td></tr>
<tr><td><span class="tag tag-warn">NEXT</span></td><td>Ingestion HF data + test 1000q</td><td>1,200</td><td>populate-all-databases.py + push-all-datasets.py</td></tr>
<tr><td><span class="tag tag-info">PHASE 2</span></td><td>Full HF samples (push-all-datasets.py config)</td><td>10,500</td><td>Ingestion 16 datasets (200-1000 samples chacun)</td></tr>
<tr><td><span class="tag tag-info">PHASE 3</span></td><td>Full HuggingFace datasets (max)</td><td>~2,375,000</td><td>Infra scaling (Pinecone Pro, Neo4j AuraDB Pro)</td></tr>
<tr><td><span class="tag tag-info">PHASE 4</span></td><td>Additional datasets (MMLU, BoolQ, RACE, QuAC, SearchQA, etc.)</td><td>10,000,000+</td><td>Dataset registry extension + multi-tenant scaling</td></tr>
</table>

<p style="color:var(--text2);margin-top:12px;font-size:0.9em">
<strong>Note :</strong> 10M+ questions nécessite un scaling significatif des BDD (Pinecone Pro tier, Neo4j AuraDB Enterprise, Supabase Pro)
et un pipeline d'ingestion industrialisé. Le sample actuel de 10,500 (Phase 2) est suffisant pour itérer et améliorer les pipelines avant le scaling.
</p>

<hr style="border:1px solid var(--border);margin:32px 0">
<p style="color:var(--text2);font-size:0.8em">
Dashboard genere par <code>benchmark-workflows/dashboard.py</code> |
Data: {total_questions:,} questions, {total_tested} testees |
BDD: Pinecone {db_coverage['pinecone']['total']:,} vecs, Neo4j {db_coverage['neo4j']['total_nodes']} nodes, Supabase 88 rows
</p>

</body>
</html>